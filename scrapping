import requests
from bs4 import BeautifulSoup
import csv

res = requests.get('https://www.practo.com/delhi/hospitals')
html_doc = res.text

soup = BeautifulSoup(html_doc, 'html.parser')
all_hospitals=[]

outer_divs = soup.findAll('div', {'data-qa-id':'hospital_card'})

for div in outer_divs:
    obj={}
    obj['Hospital_name'] = div.find('h2', {'data-qa-id':'hospital_name'}).text
    obj['doctors_count'] = div.find('div', {'data-qa-id':'doctors_count'}).text
    all_hospitals.append(obj)
headlines = ['Hospital_name', 'doctors_count']
with open('hospitals.csv', 'w',encoding = 'utf-8-sig', newline='') as f:
    writer = csv.DictWriter(f,headlines)
    writer.writeheader()
    for hospitals in all_hospitals:
        writer.writerow(hospitals)
